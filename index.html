<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MIDI to Scale Finder</title>
    <script src="Midi.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <main class="page">
        <h1>Key detection for MIDI melodies and chord progressions</h1>
        <p class="muted">It estimates its most likely key/scale. </p>

        <fieldset class="mode-selector panel" aria-label="Analysis mode">
            <legend>Analysis Mode</legend>
            <label class="mode-option">
                <input type="radio" name="mode" value="simple" id="modeSimple" checked>
                <span>Simple</span>
                <span class="mode-desc">— Shows all scales that contain the notes</span>
            </label>
            <label class="mode-option">
                <input type="radio" name="mode" value="advanced" id="modeAdvanced">
                <span>Advanced</span>
                <span class="mode-desc">— More complex analysis to find the most likely key</span>
            </label>
        </fieldset>

        <div id="dropzone" class="panel" role="button" tabindex="0" aria-label="Drop MIDI file here or click to select file">
            <div id="dropzoneContent">
                <div>Drop MIDI file here or click to choose</div>
                <div id="fileName" class="file-name hidden"></div>
            </div>
            <input type="file" id="fileInput" accept=".mid,.midi" style="display: none;" aria-label="Choose MIDI file">
        </div>
        <div id="output" class="hidden" aria-live="polite" role="region" aria-label="Analysis results"></div>

        <section class="panel" aria-labelledby="about-heading">
            <h2 id="about-heading">What this does</h2>
            <p>Analyzes MIDI files to determine their key/scale. For now, it only supports Major and Minor scales.</p>
            <h2>Simple vs Advanced mode</h2>
            <p><strong>Simple mode</strong> lists all possible scales that contain the notes in your MIDI. As an example, a MIDI using the notes C, D, E, F, G, A, B could be either C Major or A Minor, since Major scales and their relative minors share all the same notes.</p>
            <p><strong>Advanced mode</strong> uses weighted analysis (note duration, tonic/dominant emphasis) to determine which scale is most likely. This helps distinguish between relative scales by analyzing which notes the melody emphasizes.</p>
            <h2>What does "tonic" mean?</h2>
            <p>The tonic is the "home" note—the pitch everything feels drawn back to. Knowing the tonic tells you the song's key, so you know which chords and melodies fit naturally.</p>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        Open source - contributions welcome on <a href="https://github.com/hakonno/midi-scale-finder" target="_blank" rel="noopener noreferrer">GitHub</a>.
    </footer>

    <script type="module" src="./script.js"></script>
</body>
</html>